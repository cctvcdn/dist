(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{1855:function(t,e,s){"use strict";s.r(e),s(43),s(125),s(47),s(108),s(27),s(61),s(62),s(50),s(39);var a=s(7),n=s(28);function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}s(36);var r={middleware:"auth",data:function(){return{selectedTransaction:null}},computed:{items:function(){return this.$store.getters["crypto/transactionHistory"]},pagination:function(){return this.$store.getters["crypto/transactionPagination"]},filters:{get:function(){return function(t){for(var e=1;arguments.length>e;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){Object(n.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},this.$store.getters["crypto/transactionFilters"])},set:function(t){this.$store.commit("crypto/SET_HISTORY_FILTERS",t)}}},methods:{formatDate:function(t){return new Date(t).toLocaleString("vi-VN")},sign:function(t){return"spent"===t.type||"gift_sent"===t.type?"-":"+"},amountClass:function(t){return"spent"===t.type||"gift_sent"===t.type?"text-red-400 font-semibold":"text-green-400 font-semibold"},reload:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.$store.dispatch("crypto/fetchTransactionHistory",{page:1,limit:20,type:t.filters.type,currency:t.filters.currency});case 1:case"end":return e.stop()}}),e)})))()},changePage:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=1,e.$store.dispatch("crypto/fetchTransactionHistory",{page:t,limit:e.pagination.limit});case 1:case"end":return s.stop()}}),s)})))()},openTransactionModal:function(t){this.selectedTransaction=t},closeTransactionModal:function(){this.selectedTransaction=null},copyToClipboard:function(t){var e=this;return Object(a.a)(regeneratorRuntime.mark((function s(){var a,n,i;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=1,navigator.clipboard.writeText(t);case 1:null===(a=e.$toast)||void 0===a||a.success("Đã copy vào clipboard"),s.next=3;break;case 2:s.prev=2,s.catch(0),(i=document.createElement("textarea")).value=t,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i),null===(n=e.$toast)||void 0===n||n.success("Đã copy vào clipboard");case 3:case"end":return s.stop()}}),s,null,[[0,2]])})))()}},mounted:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.reload();case 1:case"end":return e.stop()}}),e)})))()}},c=r,o=s(42),l=Object(o.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"px-4 py-6 flex justify-center"},[e("div",{staticClass:"w-full max-w-3xl bg-[#181f2a] rounded-2xl shadow-2xl p-5"},[e("div",{staticClass:"mb-4"},[e("div",{staticClass:"flex items-center justify-between mb-3"},[t._m(0),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.type,expression:"filters.type"}],staticClass:"bg-[#0f1720] text-white border border-[#334155] rounded-md px-3 py-1",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"type",e.target.multiple?s:s[0])},t.reload]}},[e("option",{attrs:{value:"all"}},[t._v("Nạp")]),t._v(" "),e("option",{attrs:{value:"spent"}},[t._v("Tiêu")])])]),t._v(" "),e("div",{staticClass:"flex justify-end"},[e("nuxt-link",{staticClass:"bg-[#ff3b5c] hover:bg-[#e02d4a] text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center gap-2",attrs:{to:"/deposit"}},[e("i",{staticClass:"fas fa-plus"}),t._v("\n          Nạp Chuối\n        ")])],1)]),t._v(" "),0===t.items.length?e("div",{staticClass:"text-center text-gray-300 py-10"},[t._v("\n      Chưa có giao dịch nào\n    ")]):e("ul",{staticClass:"divide-y divide-[#233042]"},t._l(t.items,(function(s){return e("li",{key:s._id,staticClass:"py-3 flex items-center justify-between cursor-pointer hover:bg-[#1e293b] transition-colors",on:{click:function(e){return t.openTransactionModal(s)}}},[e("div",[e("div",{staticClass:"text-white font-medium"},[t._v("\n            "+t._s(s.description||("deposit"===s.type?"Nạp Chuối":s.type))+"\n          ")]),t._v(" "),e("div",{staticClass:"text-xs text-gray-400"},[t._v("\n            "+t._s(t.formatDate(s.createdAt))+"\n            "),"bananas"===s.currency&&s.txHash?e("span",{staticClass:"ml-2"},[t._v("\n              • Tx: "+t._s(s.txHash.substring(0,10))+"...\n            ")]):t._e()])]),t._v(" "),e("div",{class:t.amountClass(s)},["bananas"===s.currency?e("span",[t._v(t._s(t.sign(s))+t._s(s.points)+" Chuối")]):e("span",[t._v(t._s(t.sign(s))+t._s(s.points)+" điểm")])])])})),0),t._v(" "),t.pagination.pages>1?e("div",{staticClass:"flex justify-between items-center mt-4"},[e("button",{staticClass:"px-3 py-1 bg-[#0f1720] text-white border border-[#334155] rounded-md disabled:opacity-50",attrs:{disabled:1>=t.pagination.page},on:{click:function(e){return t.changePage(t.pagination.page-1)}}},[t._v("Trước")]),t._v(" "),e("div",{staticClass:"text-gray-300"},[t._v("Trang "+t._s(t.pagination.page)+"/"+t._s(t.pagination.pages))]),t._v(" "),e("button",{staticClass:"px-3 py-1 bg-[#0f1720] text-white border border-[#334155] rounded-md disabled:opacity-50",attrs:{disabled:t.pagination.page>=t.pagination.pages},on:{click:function(e){return t.changePage(t.pagination.page+1)}}},[t._v("Sau")])]):t._e()]),t._v(" "),t.selectedTransaction?e("div",{staticClass:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",on:{click:t.closeTransactionModal}},[e("div",{staticClass:"bg-[#181f2a] rounded-2xl shadow-2xl max-w-md w-full p-6",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"flex items-center justify-between mb-4"},[t._m(1),t._v(" "),e("button",{staticClass:"text-gray-400 hover:text-white",on:{click:t.closeTransactionModal}},[e("i",{staticClass:"fas fa-times text-xl"})])]),t._v(" "),e("div",{staticClass:"space-y-4"},[e("div",{staticClass:"flex justify-between items-center"},[e("span",{staticClass:"text-gray-400"},[t._v("Loại giao dịch:")]),t._v(" "),e("span",{staticClass:"text-white font-medium"},[t._v(t._s(t.selectedTransaction.description||t.selectedTransaction.type))])]),t._v(" "),e("div",{staticClass:"flex justify-between items-center"},[e("span",{staticClass:"text-gray-400"},[t._v("Số tiền:")]),t._v(" "),e("span",{staticClass:"font-semibold",class:t.amountClass(t.selectedTransaction)},[t._v("\n            "+t._s(t.sign(t.selectedTransaction))+t._s(t.selectedTransaction.points)+" "+t._s("bananas"===t.selectedTransaction.currency?"Chuối":"điểm")+"\n          ")])]),t._v(" "),e("div",{staticClass:"flex justify-between items-center"},[e("span",{staticClass:"text-gray-400"},[t._v("Thời gian:")]),t._v(" "),e("span",{staticClass:"text-white"},[t._v(t._s(t.formatDate(t.selectedTransaction.createdAt)))])]),t._v(" "),t.selectedTransaction.txHash?e("div",{staticClass:"flex justify-between items-center"},[e("span",{staticClass:"text-gray-400"},[t._v("Transaction Hash:")]),t._v(" "),e("div",{staticClass:"flex items-center gap-2"},[e("span",{staticClass:"text-white font-mono text-sm break-all"},[t._v(t._s(t.selectedTransaction.txHash))]),t._v(" "),e("button",{staticClass:"text-gray-400 hover:text-white transition-colors",attrs:{title:"Copy hash"},on:{click:function(e){return t.copyToClipboard(t.selectedTransaction.txHash)}}},[e("i",{staticClass:"fas fa-copy"})])])]):t._e(),t._v(" "),t.selectedTransaction.network?e("div",{staticClass:"flex justify-between items-center"},[e("span",{staticClass:"text-gray-400"},[t._v("Mạng:")]),t._v(" "),e("span",{staticClass:"text-white"},[t._v(t._s(t.selectedTransaction.network.toUpperCase()))])]):t._e(),t._v(" "),t.selectedTransaction.giftId?e("div",{staticClass:"flex justify-between items-center"},[e("span",{staticClass:"text-gray-400"},[t._v("Quà tặng:")]),t._v(" "),e("span",{staticClass:"text-white"},[t._v(t._s(t.selectedTransaction.description))])]):t._e(),t._v(" "),t.selectedTransaction.receiverName?e("div",{staticClass:"flex justify-between items-center"},[e("span",{staticClass:"text-gray-400"},[t._v("Người nhận:")]),t._v(" "),e("span",{staticClass:"text-white"},[t._v(t._s(t.selectedTransaction.receiverName))])]):t._e(),t._v(" "),t.selectedTransaction.quantity?e("div",{staticClass:"flex justify-between items-center"},[e("span",{staticClass:"text-gray-400"},[t._v("Số lượng:")]),t._v(" "),e("span",{staticClass:"text-white"},[t._v(t._s(t.selectedTransaction.quantity))])]):t._e()]),t._v(" "),e("div",{staticClass:"mt-6 flex justify-end"},[e("button",{staticClass:"bg-[#0ea5e9] hover:bg-[#0284c7] text-white px-4 py-2 rounded-md transition-colors",on:{click:t.closeTransactionModal}},[t._v("\n          Đóng\n        ")])])])]):t._e()])}),[function(){var t=this._self._c;return t("h1",{staticClass:"text-white text-xl font-semibold flex items-center gap-2"},[t("i",{staticClass:"fas fa-receipt text-[#0ea5e9]"}),this._v("\n          Lịch sử giao dịch\n        ")])},function(){var t=this._self._c;return t("h3",{staticClass:"text-white text-lg font-semibold flex items-center gap-2"},[t("i",{staticClass:"fas fa-receipt text-[#0ea5e9]"}),this._v("\n          Chi tiết giao dịch\n        ")])}],!1,null,"66a19b69",null);e.default=l.exports}}]);