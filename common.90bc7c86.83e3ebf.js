(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1551:function(t,e,i){"use strict";i.r(e),i(107),i(43),i(47),i(61),i(62),i(50),i(27),i(39);var n=i(7),r=i(28),s=(i(36),i(449),i(86)),a=i(1609),l=i(1610),o=i(1611),c=i(1612);function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){Object(r.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={name:"HighlightsIndex",components:{FeaturedHighlight:a.default,HighlightItem:l.default,FeaturedHighlights:o.default,HighlightBottomRightSidebar:c.default},data:function(){return{current:1,pageSize:10,searchQuery:""}},computed:u(u(u({},Object(s.d)("highlights",["highlights"])),Object(s.d)(["isLoading"])),{},{displayedHighlights:function(){var t=(this.current-1)*this.pageSize;return this.highlights.slice(t,t+this.pageSize)}}),mounted:function(){this.fetchHighlights()},methods:u(u({},Object(s.b)("highlights",["fetchHighlights","searchHighlights"])),{},{goToHighlight:function(t){this.$router.push("/highlights/".concat(t))},scrollToTop:function(){window.scrollTo(0,0);try{window.scrollTo({top:0,behavior:"smooth"})}catch(t){window.scrollTo(0,0)}document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0)},searchHighlights:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.searchQuery.trim()){e.next=5;break}return e.prev=1,e.next=2,t.$store.dispatch("highlights/searchHighlights",t.searchQuery.trim());case 2:t.current=1,e.next=4;break;case 3:e.prev=3,e.catch(1);case 4:e.next=6;break;case 5:return e.next=6,t.fetchHighlights();case 6:case"end":return e.stop()}}),e,null,[[1,3]])})))()}})},g=(i(1758),i(42)),v=Object(g.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"grid grid-cols-1 md:grid-cols-4 gap-0 highlights-main-grid"},[e("div",{staticClass:"col-span-1 md:col-span-3 border-r-0 md:border-r border-green_base md:pr-5 overflow-hidden max-w-[1024px] pt-6 highlights-main-content"},[t._m(0),t._v(" "),!t.highlights.length&&t.isLoading?e("div",{staticClass:"space-y-4"},t._l(4,(function(t){return e("div",{key:t,staticClass:"animate-pulse bg-dark-50 rounded-lg h-32 w-full"})})),0):[e("featured-highlight",{staticClass:"w-full mb-0",attrs:{highlight:t.displayedHighlights[0]},on:{navigateToHighlight:function(e){return t.goToHighlight(e)}}}),t._v(" "),e("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-0"},t._l(t.displayedHighlights.slice(1),(function(i,n){return e("div",{key:i._id,staticClass:"w-full"},[e("div",{staticClass:"p-0 md:p-0 flex cursor-pointer w-full",on:{click:function(e){return t.goToHighlight(i.slug)}}},[e("highlight-item",{staticClass:"w-full",attrs:{highlight:i}})],1)])})),0),t._v(" "),e("div",{staticClass:"flex justify-center mt-6"},[e("a-pagination",{staticClass:"mt-4",attrs:{total:t.highlights.length,"page-size":t.pageSize},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}})],1)]],2),t._v(" "),e("div",{staticClass:"hidden md:block pl-2 max-w-[286px] featured-highlights-sidebar"},[e("featured-highlights",{staticClass:"mb-6",attrs:{highlights:t.highlights.slice(0,5),goToHighlight:t.goToHighlight}}),t._v(" "),e("div",{staticClass:"bg-gradient-to-r from-background to-dark-50 rounded-lg p-4 border border-gray-800 mb-6"},[e("h3",{staticClass:"text-white font-bold text-lg mb-4"},[t._v("TÌM KIẾM HIGHLIGHTS")]),t._v(" "),e("div",{staticClass:"relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"w-full bg-dark-50 text-white px-4 py-2 rounded-lg border border-gray-700 focus:border-green_base focus:outline-none",attrs:{type:"text",placeholder:"Nhập từ khóa..."},domProps:{value:t.searchQuery},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHighlights.apply(null,arguments)},input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._v(" "),e("button",{staticClass:"absolute right-2 top-1/2 transform -translate-y-1/2 text-green_base hover:text-green-400 transition-colors",on:{click:t.searchHighlights}},[e("svg",{staticClass:"w-5 h-5",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}})])])])]),t._v(" "),e("highlight-bottom-right-sidebar")],1)])}),[function(){var t=this._self._c;return t("h1",{staticClass:"text-white mb-4 text-2xl md:text-3xl font-bold relative inline-block tracking-tight"},[this._v("\n      HIGHLIGHTS MỚI NHẤT\n      "),t("div",{staticClass:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-green_base to-transparent"})])}],!1,null,"93b2d93e",null);e.default=v.exports},1609:function(t,e,i){"use strict";i.r(e),i(107);var n=i(5),r=i.n(n),s={name:"FeaturedHighlight",props:{highlight:{type:Object,required:!0}},methods:{formatDate:function(t){return r()(t).format("DD/MM/YYYY")}}},a=(i(1753),i(42)),l=Object(a.a)(s,(function(){var t=this,e=t._self._c;return t.highlight?e("div",{staticClass:"relative overflow-hidden transition-all duration-300 cursor-pointer group",on:{click:function(e){return t.$emit("navigateToHighlight",t.highlight.slug)}}},[e("div",{staticClass:"relative h-[300px] md:h-[400px] overflow-hidden"},[e("img",{staticClass:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",attrs:{src:t.highlight.thumbnail,alt:t.highlight.title}}),t._v(" "),e("div",{staticClass:"absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/50 transition-all duration-300"},[e("div",{staticClass:"w-12 h-12 bg-green_base/90 rounded-full flex items-center justify-center group-hover:bg-green_base group-hover:scale-110 transition-all duration-300"},[e("svg",{staticClass:"w-6 h-6 text-white ml-0.5",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8 5v14l11-7z"}})])])]),t._v(" "),e("div",{staticClass:"absolute bottom-4 left-4 bg-black/80 text-white text-sm px-3 py-1 rounded-full"},[t._v("\n      "+t._s(t.highlight.views||0)+" lượt xem\n    ")])]),t._v(" "),e("div",{staticClass:"p-4 md:p-6"},[e("h2",{staticClass:"text-2xl md:text-3xl font-bold text-white mb-4 group-hover:text-green_base transition-colors leading-tight"},[t._v("\n      "+t._s(t.highlight.title)+"\n    ")]),t._v(" "),e("div",{staticClass:"text-gray-10 text-base mb-4 line-clamp-3"},[e("div",{domProps:{innerHTML:t._s(t.highlight.content)}})]),t._v(" "),t.highlight.tags&&t.highlight.tags.length?e("div",{staticClass:"flex flex-wrap gap-2 mb-4"},[t._l(t.highlight.tags.slice(0,4),(function(i){return e("span",{key:i,staticClass:"px-3 py-1 bg-green_base/20 text-green_base text-sm rounded-full hover:bg-green_base/30 transition-colors"},[t._v("\n        #"+t._s(i)+"\n      ")])})),t._v(" "),t.highlight.tags.length>4?e("span",{staticClass:"text-gray-400 text-sm px-3 py-1"},[t._v("\n        +"+t._s(t.highlight.tags.length-4)+"\n      ")]):t._e()],2):t._e(),t._v(" "),e("div",{staticClass:"flex justify-between items-center text-gray-10 text-sm"},[e("div",{staticClass:"flex items-center"},[e("span",{staticClass:"mr-4"},[t._v(t._s(t.highlight.authorName))]),t._v(" "),e("span",[t._v(t._s(t.formatDate(t.highlight.createdAt)))])]),t._v(" "),e("div",{staticClass:"text-green_base font-semibold"},[t._v("\n        Xem ngay →\n      ")])])])]):t._e()}),[],!1,null,"e4e4f684",null);e.default=l.exports},1610:function(t,e,i){"use strict";i.r(e),i(107);var n=i(5),r=i.n(n),s={name:"HighlightItem",props:{highlight:{type:Object,required:!0}},methods:{formatDate:function(t){return r()(t).format("DD/MM/YYYY")},navigateToHighlight:function(){this.$router.push("/highlights/".concat(this.highlight.slug))},scrollToTop:function(){window.scrollTo(0,0);try{window.scrollTo({top:0,behavior:"smooth"})}catch(t){window.scrollTo(0,0)}document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0)}}},a=(i(1754),i(42)),l=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-0 flex flex-row items-start cursor-pointer group",on:{click:t.navigateToHighlight}},[e("div",{staticClass:"relative flex-shrink-0 w-[140px] h-[84px] md:w-[180px] md:h-[120px] mr-3 md:mr-0"},[e("img",{staticClass:"w-full h-full object-cover transition duration-200",attrs:{src:t.highlight.thumbnail,alt:"Highlight"}}),t._v(" "),e("div",{staticClass:"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/40 transition-all duration-200"},[e("div",{staticClass:"w-8 h-8 bg-green_base/90 rounded-full flex items-center justify-center group-hover:bg-green_base transition-all duration-200"},[e("svg",{staticClass:"w-4 h-4 text-white ml-0.5",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8 5v14l11-7z"}})])])])]),t._v(" "),e("div",{staticClass:"px-2 md:px-4 py-2 md:py-4 flex-1 flex flex-col justify-between"},[e("div",{staticClass:"flex-1"},[e("h3",{staticClass:"text-base md:text-lg font-bold text-white mb-1 md:mb-2 group-hover:text-green_base transition-colors leading-snug line-clamp-2"},[t._v("\n        "+t._s(t.highlight.title)+"\n      ")]),t._v(" "),e("div",{staticClass:"text-gray-10 text-sm mb-2 prose prose-invert max-w-none overflow-hidden relative highlight-preview-text"},[e("div",{staticClass:"line-clamp-5",domProps:{innerHTML:t._s(t.highlight.content)}})]),t._v(" "),t.highlight.tags&&t.highlight.tags.length?e("div",{staticClass:"flex flex-wrap gap-1 mb-2"},[t._l(t.highlight.tags.slice(0,3),(function(i){return e("span",{key:i,staticClass:"px-2 py-1 bg-green_base/20 text-green_base text-xs rounded-full"},[t._v("\n          #"+t._s(i)+"\n        ")])})),t._v(" "),t.highlight.tags.length>3?e("span",{staticClass:"text-gray-400 text-xs px-2 py-1"},[t._v("\n          +"+t._s(t.highlight.tags.length-3)+"\n        ")]):t._e()],2):t._e()]),t._v(" "),e("div",{staticClass:"flex justify-between items-center mt-auto"},[e("div",{staticClass:"flex items-center text-gray-10 text-xs min-w-0 flex-1"},[e("span",{staticClass:"mr-3 truncate"},[t._v(t._s(t.highlight.views||0)+" lượt xem")]),t._v(" "),e("span",{staticClass:"truncate"},[t._v(t._s(t.formatDate(t.highlight.createdAt)))])]),t._v(" "),e("div",{staticClass:"text-gray-10 text-xs truncate ml-2 max-w-[120px]"},[t._v("\n        "+t._s(t.highlight.authorName)+"\n      ")])])])])}),[],!1,null,"9410c9f0",null);e.default=l.exports},1611:function(t,e,i){"use strict";i.r(e);var n=i(5),r=i.n(n),s={name:"FeaturedHighlights",props:{highlights:{type:Array,default:function(){return[]}},goToHighlight:{type:Function,required:!0}},methods:{formatDate:function(t){return r()(t).format("DD/MM")}}},a=(i(1755),i(42)),l=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-gradient-to-r from-background to-dark-50 rounded-lg p-4 border border-gray-800"},[e("h3",{staticClass:"text-white font-bold text-lg mb-4 flex items-center"},[e("svg",{staticClass:"w-5 h-5 text-green_base mr-2",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8 5v14l11-7z"}})]),t._v("\n    HIGHLIGHTS NỔI BẬT\n  ")]),t._v(" "),t.highlights.length?e("div",{staticClass:"space-y-3"},t._l(t.highlights,(function(i,n){return e("div",{key:i._id,staticClass:"flex cursor-pointer group hover:bg-dark-50/50 p-2 rounded-lg transition-all duration-200",on:{click:function(e){return t.goToHighlight(i.slug)}}},[e("div",{staticClass:"relative w-16 h-12 flex-shrink-0 mr-3 overflow-hidden rounded"},[e("img",{staticClass:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",attrs:{src:i.thumbnail,alt:i.title}}),t._v(" "),e("div",{staticClass:"absolute inset-0 flex items-center justify-center bg-black/30"},[e("svg",{staticClass:"w-4 h-4 text-white",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8 5v14l11-7z"}})])])]),t._v(" "),e("div",{staticClass:"highlight-content-wrapper min-w-0 flex-1"},[e("h4",{staticClass:"text-white text-sm font-semibold line-clamp-2 group-hover:text-green_base transition-colors leading-tight"},[t._v("\n          "+t._s(i.title)+"\n        ")]),t._v(" "),e("div",{staticClass:"flex items-center justify-between mt-1"},[e("span",{staticClass:"text-gray-10 text-xs"},[t._v(t._s(i.views||0)+" views")]),t._v(" "),e("span",{staticClass:"text-gray-10 text-xs"},[t._v(t._s(t.formatDate(i.createdAt)))])])]),t._v(" "),e("div",{staticClass:"flex-shrink-0 ml-2 flex items-center"},[e("span",{staticClass:"text-green_base font-bold text-lg"},[t._v(t._s(n+1))])])])})),0):e("div",{staticClass:"space-y-3"},t._l(5,(function(t){return e("div",{key:t,staticClass:"animate-pulse bg-dark-50 rounded-lg h-20 w-full"})})),0)])}),[],!1,null,"1144ed98",null);e.default=l.exports},1612:function(t,e,i){"use strict";i.r(e),i(43),i(47),i(61),i(62),i(50),i(27),i(39);var n=i(28),r=i(7),s=(i(36),i(86)),a=i(1547),l=i(5),o=i.n(l);function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function h(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){Object(n.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={name:"HighlightBottomRightSidebar",components:{AdSlot:a.default},data:function(){return{popularHighlights:[]}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.loadPopularHighlights();case 1:case"end":return e.stop()}}),e)})))()},methods:h(h({},Object(s.b)("highlights",["fetchPopularHighlights"])),{},{loadPopularHighlights:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,t.fetchPopularHighlights(5);case 1:i=e.sent,t.popularHighlights=i||[],e.next=3;break;case 2:e.prev=2,e.catch(0);case 3:case"end":return e.stop()}}),e,null,[[0,2]])})))()},goToHighlight:function(t){this.$router.push("/highlights/".concat(t))},formatDate:function(t){return o()(t).format("DD/MM")}})},d=(i(1757),i(42)),g=Object(d.a)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-gradient-to-r from-background to-dark-50 rounded-lg p-4 border border-gray-800"},[e("div",{staticClass:"mb-6"},[e("AdSlot",{attrs:{position:"highlights-bottom-right-sidebar"}})],1),t._v(" "),e("div",{staticClass:"mb-6"},[e("h3",{staticClass:"text-white font-bold text-lg mb-4 flex items-center"},[e("svg",{staticClass:"w-5 h-5 text-green_base mr-2",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"}})]),t._v("\n      HIGHLIGHTS PHỔ BIẾN\n    ")]),t._v(" "),t.popularHighlights.length?e("div",{staticClass:"space-y-3"},t._l(t.popularHighlights,(function(i,n){return e("div",{key:i._id,staticClass:"flex cursor-pointer group hover:bg-dark-50/50 p-2 rounded-lg transition-all duration-200",on:{click:function(e){return t.goToHighlight(i.slug)}}},[e("div",{staticClass:"relative w-16 h-12 flex-shrink-0 mr-3 overflow-hidden rounded"},[e("img",{staticClass:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",attrs:{src:i.thumbnail,alt:i.title}}),t._v(" "),e("div",{staticClass:"absolute inset-0 flex items-center justify-center bg-black/30"},[e("svg",{staticClass:"w-4 h-4 text-white",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8 5v14l11-7z"}})])])]),t._v(" "),e("div",{staticClass:"popular-highlight-content min-w-0 flex-1"},[e("h4",{staticClass:"text-white text-sm font-semibold line-clamp-2 group-hover:text-green_base transition-colors leading-tight"},[t._v("\n            "+t._s(i.title)+"\n          ")]),t._v(" "),e("div",{staticClass:"flex items-center justify-between mt-1"},[e("span",{staticClass:"text-gray-10 text-xs"},[t._v(t._s(i.views||0)+" views")]),t._v(" "),e("span",{staticClass:"text-gray-10 text-xs"},[t._v(t._s(t.formatDate(i.createdAt)))])])]),t._v(" "),e("div",{staticClass:"flex-shrink-0 ml-2 flex items-center"},[e("span",{staticClass:"text-green_base font-bold text-lg"},[t._v(t._s(n+1))])])])})),0):e("div",{staticClass:"text-center py-4 text-gray-400"},[t._v("\n      Không có highlights phổ biến\n    ")])])])}),[],!1,null,"a03f5c6c",null);e.default=g.exports},1622:function(t,e,i){"use strict";i.r(e),i(43),i(47),i(61),i(62),i(50),i(27),i(39);var n=i(28),r=i(7),s=(i(107),i(36),i(86)),a=i(5),l=i.n(a);function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;arguments.length>e;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){Object(n.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h={name:"RelatedHighlights",data:function(){return{highlights:[],isLoading:!0}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.fetchRelatedHighlights();case 1:case"end":return e.stop()}}),e)})))()},methods:c(c({},Object(s.b)("highlights",["fetchHighlights"])),{},{fetchRelatedHighlights:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=1,t.fetchHighlights();case 1:i=t.$store.state.highlights.highlights,t.highlights=i.slice(0,3),e.next=3;break;case 2:e.prev=2,e.catch(0);case 3:return e.prev=3,t.isLoading=!1,e.finish(3);case 4:case"end":return e.stop()}}),e,null,[[0,2,3,4]])})))()},goToHighlight:function(t){this.$router.push("/highlights/".concat(t))},scrollToTop:function(){window.scrollTo(0,0);try{window.scrollTo({top:0,behavior:"smooth"})}catch(t){window.scrollTo(0,0)}document.documentElement&&(document.documentElement.scrollTop=0),document.body&&(document.body.scrollTop=0)},formatDate:function(t){return l()(t).format("DD/MM/YYYY")}})},u=(i(1785),i(42)),d=Object(u.a)(h,(function(){var t=this,e=t._self._c;return e("div",[!t.highlights.length&&t.isLoading?e("div",{staticClass:"space-y-4"},t._l(3,(function(t){return e("div",{key:t,staticClass:"animate-pulse bg-dark-50 rounded-lg h-32 w-full"})})),0):t.highlights.length?e("div",{staticClass:"space-y-4"},t._l(t.highlights,(function(i){return e("div",{key:i._id,staticClass:"bg-gradient-to-r from-background to-dark-50 p-4 rounded-lg cursor-pointer hover:shadow-green_base/30 hover:scale-[1.01] transition-all duration-300 border border-gray-800 group",on:{click:function(e){return t.goToHighlight(i.slug)}}},[e("div",{staticClass:"flex"},[e("div",{staticClass:"relative w-24 h-16 flex-shrink-0 mr-4 overflow-hidden rounded"},[e("img",{staticClass:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",attrs:{src:i.thumbnail,alt:i.title}}),t._v(" "),e("div",{staticClass:"absolute inset-0 flex items-center justify-center bg-black/30"},[e("svg",{staticClass:"w-5 h-5 text-white",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8 5v14l11-7z"}})])])]),t._v(" "),e("div",{staticClass:"flex-1 min-w-0"},[e("h4",{staticClass:"text-white font-semibold line-clamp-2 group-hover:text-green_base transition-colors leading-tight mb-2"},[t._v("\n            "+t._s(i.title)+"\n          ")]),t._v(" "),e("div",{staticClass:"flex items-center justify-between text-gray-10 text-sm"},[e("span",[t._v(t._s(i.views||0)+" lượt xem")]),t._v(" "),e("span",[t._v(t._s(t.formatDate(i.createdAt)))])])])])])})),0):e("div",{staticClass:"text-center py-8 text-gray-10"},[t._v("\n    Không có highlights liên quan\n  ")])])}),[],!1,null,"4d968780",null);e.default=d.exports},1623:function(t,e,i){"use strict";i.r(e),i(449);var n=i(7),r=(i(36),i(66),i(842),i(27),i(850)),s=i.n(r),a=i(1538),l=i.n(a);i(1539),s.a.extend(l.a),s.a.locale("vi");var o={name:"HighlightComments",props:{highlightId:{type:String,required:!0}},data:function(){return{content:"",loadingMore:!1,hasMoreComments:!0,currentSkip:0,replyingTo:null,replyContent:""}},computed:{comments:function(){return this.$store.getters["highlightComments/commentsByHighlight"](this.highlightId)},loading:function(){return this.$store.getters["highlightComments/loading"](this.highlightId)},canSubmit:function(){var t;return!!this.content.trim()&&1e3>=this.content.trim().length&&(null===(t=this.$auth)||void 0===t?void 0:t.loggedIn)}},mounted:function(){this.loadInitialComments()},methods:{formatTime:function(t){return s()(t).fromNow()},isOwner:function(t){var e,i,n,r=(null===(e=this.$auth)||void 0===e||null===(e=e.user)||void 0===e?void 0:e._id)||(null===(i=this.$auth)||void 0===i||null===(i=i.user)||void 0===i?void 0:i.id);return r&&(t.userId===r||(null===(n=t.userId)||void 0===n?void 0:n._id)===r)},canDelete:function(t){var e,i=null===(e=this.$auth)||void 0===e||null===(e=e.user)||void 0===e?void 0:e.role;return"admin"===i||"master"===i||this.isOwner(t)},getLevelBadge:function(t){return t&&t>0?i(1>t||t>19?20>t||t>39?40>t||t>59?60>t||t>79?80>t||t>100?101>t||t>109?110>t||t>119?120>t||t>129?130>t||t>139?140>t||t>149?150>t||t>159?160>t||t>169?170>t||t>179?180>t||t>189?190>t||t>199?200>t||t>299?300>t||t>349?350>t||t>399?400>t||t>449?1550:1579:1578:1577:1576:1575:1574:1573:1572:1571:1570:1569:1568:1567:1566:1565:1564:1563:1562:1561):""},shouldShowLevelText:function(t){return t>=1&&100>=t},submit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var i,n,r,s,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=t.$auth)&&void 0!==i&&i.loggedIn){e.next=1;break}return null===(n=t.$message)||void 0===n||null===(r=n.warning)||void 0===r||r.call(n,"Bạn cần đăng nhập để bình luận."),e.abrupt("return");case 1:if(s=t.content.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=3,t.$store.dispatch("highlightComments/addComment",{highlightId:t.highlightId,content:s});case 3:t.content="",e.next=5;break;case 4:e.prev=4,e.catch(2),null===(a=t.$message)||void 0===a||null===(l=a.error)||void 0===l||l.call(a,"Gửi bình luận thất bại");case 5:case"end":return e.stop()}}),e,null,[[2,4]])})))()},onLike:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==(n=e.$auth)&&void 0!==n&&n.loggedIn){i.next=1;break}return i.abrupt("return");case 1:return i.prev=1,i.next=2,e.$store.dispatch("highlightComments/likeComment",{highlightId:e.highlightId,commentId:t._id});case 2:i.next=4;break;case 3:i.prev=3,i.catch(1);case 4:case"end":return i.stop()}}),i,null,[[1,3]])})))()},onDislike:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==(n=e.$auth)&&void 0!==n&&n.loggedIn){i.next=1;break}return i.abrupt("return");case 1:return i.prev=1,i.next=2,e.$store.dispatch("highlightComments/dislikeComment",{highlightId:e.highlightId,commentId:t._id});case 2:i.next=4;break;case 3:i.prev=3,i.catch(1);case 4:case"end":return i.stop()}}),i,null,[[1,3]])})))()},onDelete:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==(n=e.$auth)&&void 0!==n&&n.loggedIn){i.next=1;break}return i.abrupt("return");case 1:return i.prev=1,i.next=2,e.$store.dispatch("highlightComments/deleteComment",{highlightId:e.highlightId,commentId:t._id});case 2:i.next=4;break;case 3:i.prev=3,i.catch(1);case 4:case"end":return i.stop()}}),i,null,[[1,3]])})))()},loadInitialComments:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.currentSkip=0,e.next=1,t.$store.dispatch("highlightComments/fetchComments",{highlightId:t.highlightId,limit:10,skip:0});case 1:case"end":return e.stop()}}),e)})))()},loadMoreComments:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadingMore&&t.hasMoreComments){e.next=1;break}return e.abrupt("return");case 1:return t.loadingMore=!0,t.currentSkip+=10,e.prev=2,e.next=3,t.$store.dispatch("highlightComments/fetchComments",{highlightId:t.highlightId,limit:10,skip:t.currentSkip,append:!0});case 3:10>e.sent.length&&(t.hasMoreComments=!1),e.next=5;break;case 4:e.prev=4,e.catch(2);case 5:return e.prev=5,t.loadingMore=!1,e.finish(5);case 6:case"end":return e.stop()}}),e,null,[[2,4,5,6]])})))()},handleEnterKey:function(t){!t.shiftKey&&this.canSubmit&&this.submit(),t.stopPropagation()},openLoginModal:function(){this.$root.$emit("open-login-modal")},toggleReplyInput:function(t){this.replyingTo=this.replyingTo===t._id?null:t._id,this.replyContent=""},cancelReply:function(){this.replyingTo=null,this.replyContent=""},handleReplyEnter:function(t){var e=this;if(!t.shiftKey&&this.replyContent.trim()){var i=this.comments.find((function(t){return t._id===e.replyingTo}));i&&this.submitReply(i)}t.stopPropagation()},submitReply:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function i(){var n,r,s,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.replyContent.trim()){i.next=1;break}return i.abrupt("return");case 1:if(null!==(n=e.$auth)&&void 0!==n&&n.loggedIn){i.next=2;break}return alert("Bạn cần đăng nhập để trả lời."),i.abrupt("return");case 2:if(t&&t._id){i.next=3;break}return alert("Lỗi: Không tìm thấy bình luận."),i.abrupt("return");case 3:return i.prev=3,i.next=4,e.$axios.post("/highlights/".concat(e.highlightId,"/comments/").concat(t._id,"/replies"),{content:e.replyContent});case 4:(r=i.sent).data&&r.data.data?(e.$store.commit("highlightComments/ADD_REPLY",{highlightId:e.highlightId,commentId:t._id,reply:r.data.data}),e.replyingTo=null,e.replyContent=""):alert("Lỗi: Không nhận được dữ liệu trả lời từ server."),i.next=6;break;case 5:i.prev=5,a=i.catch(3),alert("Lỗi khi gửi trả lời: "+((null===(s=a.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)||a.message));case 6:case"end":return i.stop()}}),i,null,[[3,5]])})))()},onLikeReply:function(t,e){var i=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(r=i.$auth)&&void 0!==r&&r.loggedIn){n.next=1;break}return alert("Bạn cần đăng nhập để thích trả lời."),n.abrupt("return");case 1:return n.prev=1,n.next=2,i.$axios.post("/highlights/".concat(i.highlightId,"/comments/").concat(t._id,"/replies/").concat(e._id,"/like"));case 2:s=n.sent,i.$store.commit("highlightComments/UPDATE_REPLY_REACTIONS",{highlightId:i.highlightId,commentId:t._id,replyId:e._id,likes:s.data.data.likes,dislikes:s.data.data.dislikes}),n.next=4;break;case 3:n.prev=3,n.catch(1);case 4:case"end":return n.stop()}}),n,null,[[1,3]])})))()},onDislikeReply:function(t,e){var i=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(r=i.$auth)&&void 0!==r&&r.loggedIn){n.next=1;break}return alert("Bạn cần đăng nhập để không thích trả lời."),n.abrupt("return");case 1:return n.prev=1,n.next=2,i.$axios.post("/highlights/".concat(i.highlightId,"/comments/").concat(t._id,"/replies/").concat(e._id,"/dislike"));case 2:s=n.sent,i.$store.commit("highlightComments/UPDATE_REPLY_REACTIONS",{highlightId:i.highlightId,commentId:t._id,replyId:e._id,likes:s.data.data.likes,dislikes:s.data.data.dislikes}),n.next=4;break;case 3:n.prev=3,n.catch(1);case 4:case"end":return n.stop()}}),n,null,[[1,3]])})))()},onDeleteReply:function(t,e){var i=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Bạn có chắc chắn muốn xóa trả lời này?")){n.next=1;break}return n.abrupt("return");case 1:return n.prev=1,n.next=2,i.$axios.delete("/highlights/".concat(i.highlightId,"/comments/").concat(t._id,"/replies/").concat(e._id));case 2:i.$store.commit("highlightComments/REMOVE_REPLY",{highlightId:i.highlightId,commentId:t._id,replyId:e._id}),n.next=4;break;case 3:n.prev=3,s=n.catch(1),alert("Lỗi khi xóa trả lời: "+((null===(r=s.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)||s.message));case 4:case"end":return n.stop()}}),n,null,[[1,3]])})))()},canDeleteReply:function(t){var e,i,n,r=null===(e=this.$auth)||void 0===e||null===(e=e.user)||void 0===e?void 0:e.role,s="admin"===r||"master"===r,a=(null===(i=this.$auth)||void 0===i||null===(i=i.user)||void 0===i?void 0:i._id)||(null===(n=this.$auth)||void 0===n||null===(n=n.user)||void 0===n?void 0:n.id);return s||a&&t.userId===a}}},c=i(42),h=Object(c.a)(o,(function(){var t,e,i,n,r,s=this,a=s._self._c;return a("div",[a("h2",{staticClass:"text-2xl font-bold text-white mb-4"},[s._v("Bình luận")]),s._v(" "),null!==(t=s.$auth)&&void 0!==t&&t.loggedIn?a("div",{staticClass:"highlight-comment-input-container bg-[#1a1a1a] border border-green_base/50 rounded-lg p-4 mb-2"},[a("div",{staticClass:"flex items-start gap-3"},[null!==(e=s.$auth)&&void 0!==e&&null!==(e=e.user)&&void 0!==e&&e.avatar_url||null!==(i=s.$auth)&&void 0!==i&&null!==(i=i.user)&&void 0!==i&&i.photoURL?a("img",{staticClass:"w-10 h-10 rounded-full object-cover",attrs:{src:(null===(n=s.$auth)||void 0===n||null===(n=n.user)||void 0===n?void 0:n.avatar_url)||(null===(r=s.$auth)||void 0===r||null===(r=r.user)||void 0===r?void 0:r.photoURL),alt:"avatar"}}):s._e(),s._v(" "),a("div",{staticClass:"flex-1"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:s.content,expression:"content"}],staticClass:"highlight-comment-textarea w-full bg-[#2a2a2a] text-white placeholder-gray-400 border border-green_base/40 rounded-md px-3 py-2 focus:outline-none focus:border-green_base text-base",attrs:{rows:"3",placeholder:"Viết bình luận..."},domProps:{value:s.content},on:{keydown:function(t){return!t.type.indexOf("key")&&s._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),s.handleEnterKey.apply(null,arguments))},input:function(t){t.target.composing||(s.content=t.target.value)}}}),s._v(" "),a("div",{staticClass:"flex justify-between mt-2"},[a("div",{staticClass:"text-xs text-gray-400"},[s._v(s._s(s.content.length)+"/1000")]),s._v(" "),a("button",{staticClass:"px-4 py-2 bg-green_base hover:bg-green-600 text-white rounded-md disabled:opacity-50",attrs:{disabled:!s.canSubmit},on:{click:s.submit}},[s._v("\n            Gửi bình luận\n          ")])])])])]):a("div",{staticClass:"highlight-comment-login-prompt bg-[#1a1a1a] border border-green_base/50 rounded-lg p-4 mb-2"},[a("div",{staticClass:"flex items-center justify-between"},[s._m(0),s._v(" "),a("button",{staticClass:"px-2 py-1 bg-green_base hover:bg-green-600 text-white rounded-md font-medium",on:{click:s.openLoginModal}},[s._v("\n        Đăng nhập\n      ")])])]),s._v(" "),s.loading?a("div",{staticClass:"text-gray-300"},[s._v("Đang tải bình luận...")]):a("div",[0===s.comments.length?a("div",{staticClass:"text-gray-400"},[s._v("Chưa có bình luận nào. Hãy là người đầu tiên!")]):a("ul",s._l(s.comments,(function(t){var e,i,n,r,l;return a("li",{key:t._id,staticClass:"highlight-comment-item bg-[#1a1a1a] rounded-lg p-1"},[a("div",{staticClass:"flex items-start gap-3"},[a("img",{staticClass:"w-10 h-10 rounded-full object-cover",attrs:{src:t.userAvatarUrl,alt:"avatar"}}),s._v(" "),a("div",{staticClass:"flex-1"},[a("div",{staticClass:"flex items-center gap-2 text-white"},[a("span",{staticClass:"font-semibold"},[s._v(s._s(t.userName))]),s._v(" "),s.getLevelBadge(t.userLevel)?a("div",{staticClass:"flex items-center"},[a("img",{staticClass:"w-5 h-5 object-contain",attrs:{src:s.getLevelBadge(t.userLevel),alt:"Level ".concat(t.userLevel)}}),s._v(" "),s.shouldShowLevelText(t.userLevel)?a("span",{staticClass:"text-xs text-white font-bold ml-1"},[s._v("\n                  "+s._s(t.userLevel)+"\n                ")]):s._e()]):s._e(),s._v(" "),a("span",{staticClass:"text-xs text-gray-500"},[s._v("• "+s._s(s.formatTime(t.createdAt)))])]),s._v(" "),a("div",{staticClass:"text-white mt-1 whitespace-pre-line"},[s._v(s._s(t.content))]),s._v(" "),a("div",{staticClass:"flex items-center gap-4 mt-2 text-sm"},[a("button",{staticClass:"text-white hover:text-gray-300",on:{click:function(e){return s.onLike(t)}}},[s._v("👍 "+s._s(t.likes||0))]),s._v(" "),a("button",{staticClass:"text-white hover:text-gray-300",on:{click:function(e){return s.onDislike(t)}}},[s._v("👎 "+s._s(t.dislikes||0))]),s._v(" "),s.canDelete(t)?a("button",{staticClass:"text-red-400 hover:text-red-300",on:{click:function(e){return s.onDelete(t)}}},[s._v("Xóa")]):s._e(),s._v(" "),null!==(e=s.$auth)&&void 0!==e&&e.loggedIn?a("button",{staticClass:"text-green-400 hover:text-green-300 text-xs md:text-sm",on:{click:function(e){return s.toggleReplyInput(t)}}},[s._v("Trả lời")]):s._e()]),s._v(" "),s.replyingTo===t._id?a("div",{staticClass:"mt-3 p-3 bg-[#2a2a2a] rounded-lg"},[a("div",{staticClass:"flex items-start gap-2"},[null!==(i=s.$auth)&&void 0!==i&&null!==(i=i.user)&&void 0!==i&&i.avatar_url||null!==(n=s.$auth)&&void 0!==n&&null!==(n=n.user)&&void 0!==n&&n.photoURL?a("img",{staticClass:"w-8 h-8 rounded-full object-cover",attrs:{src:(null===(r=s.$auth)||void 0===r||null===(r=r.user)||void 0===r?void 0:r.avatar_url)||(null===(l=s.$auth)||void 0===l||null===(l=l.user)||void 0===l?void 0:l.photoURL),alt:"avatar"}}):s._e(),s._v(" "),a("div",{staticClass:"flex-1"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:s.replyContent,expression:"replyContent"}],staticClass:"w-full bg-[#1a1a1a] text-white placeholder-gray-400 border border-green_base/40 rounded-md px-3 py-2 focus:outline-none focus:border-green_base text-base",attrs:{rows:"2",placeholder:"Viết trả lời..."},domProps:{value:s.replyContent},on:{keydown:function(t){return!t.type.indexOf("key")&&s._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),s.handleReplyEnter.apply(null,arguments))},input:function(t){t.target.composing||(s.replyContent=t.target.value)}}}),s._v(" "),a("div",{staticClass:"flex justify-between mt-2"},[a("div",{staticClass:"text-xs text-gray-400"},[s._v(s._s(s.replyContent.length)+"/1000")]),s._v(" "),a("div",{staticClass:"flex gap-2"},[a("button",{staticClass:"px-3 py-1 text-gray-400 hover:text-white text-sm",on:{click:s.cancelReply}},[s._v("Hủy")]),s._v(" "),a("button",{staticClass:"px-4 py-1 bg-green_base hover:bg-green-600 text-white rounded-md text-sm disabled:opacity-50",attrs:{disabled:!s.replyContent.trim()||s.replyContent.length>1e3},on:{click:function(e){return s.submitReply(t)}}},[s._v("Gửi")])])])])])]):s._e(),s._v(" "),t.replies&&t.replies.length>0?a("div",{staticClass:"mt-0 ml-0 space-y-0"},s._l(t.replies,(function(e){return a("div",{key:e._id,staticClass:"bg-[#2a2a2a] rounded-lg p-1"},[a("div",{staticClass:"flex items-start gap-2"},[a("img",{staticClass:"w-8 h-8 rounded-full object-cover",attrs:{src:e.userAvatarUrl,alt:"avatar"}}),s._v(" "),a("div",{staticClass:"flex-1"},[a("div",{staticClass:"flex items-center gap-2 text-white"},[a("span",{staticClass:"font-semibold text-xs md:text-sm"},[s._v(s._s(e.userName))]),s._v(" "),s.getLevelBadge(e.userLevel)?a("div",{staticClass:"flex items-center"},[a("img",{staticClass:"w-3 h-3 md:w-4 md:h-4 object-contain",attrs:{src:s.getLevelBadge(e.userLevel),alt:"Level ".concat(e.userLevel)}}),s._v(" "),s.shouldShowLevelText(e.userLevel)?a("span",{staticClass:"text-xs text-white font-bold ml-1"},[s._v("\n                          "+s._s(e.userLevel)+"\n                        ")]):s._e()]):s._e(),s._v(" "),a("span",{staticClass:"text-xs text-gray-500"},[s._v("• "+s._s(s.formatTime(e.createdAt)))])]),s._v(" "),a("div",{staticClass:"text-white text-xs md:text-sm mt-1 whitespace-pre-line"},[s._v(s._s(e.content))]),s._v(" "),a("div",{staticClass:"flex items-center gap-3 mt-2 text-xs"},[a("button",{staticClass:"text-white hover:text-gray-300 text-xs",on:{click:function(i){return s.onLikeReply(t,e)}}},[s._v("👍 "+s._s(e.likes||0))]),s._v(" "),a("button",{staticClass:"text-white hover:text-gray-300 text-xs",on:{click:function(i){return s.onDislikeReply(t,e)}}},[s._v("👎 "+s._s(e.dislikes||0))]),s._v(" "),s.canDeleteReply(e)?a("button",{staticClass:"text-red-400 hover:text-red-300 text-xs",on:{click:function(i){return s.onDeleteReply(t,e)}}},[s._v("Xóa")]):s._e()])])])])})),0):s._e()])])])})),0),s._v(" "),s.hasMoreComments&&s.comments.length>0?a("div",{staticClass:"text-center mt-4"},[a("button",{staticClass:"px-6 py-2 bg-green_base hover:bg-green-600 text-white rounded-md disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:s.loadingMore},on:{click:s.loadMoreComments}},[s._v("\n        "+s._s(s.loadingMore?"Đang tải...":"Xem thêm bình luận")+"\n      ")])]):s._e()])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center gap-3"},[e("div",{staticClass:"w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center"},[e("span",{staticClass:"text-gray-400 text-lg"},[t._v("👤")])]),t._v(" "),e("div",{staticClass:"flex items-center"},[e("p",{staticClass:"text-white font-medium m-0"},[t._v("Đăng nhập để bình luận")])])])}],!1,null,"69678c30",null);e.default=h.exports},1624:function(t,e,i){"use strict";i.r(e);var n=i(42),r=Object(n.a)({name:"HighlightNotFound"},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center py-16"},[e("div",{staticClass:"mb-8"},[e("svg",{staticClass:"w-24 h-24 text-gray-400 mx-auto mb-4",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M8 5v14l11-7z"}})]),t._v(" "),e("h2",{staticClass:"text-2xl font-bold text-white mb-2"},[t._v("Highlight không tồn tại")]),t._v(" "),e("p",{staticClass:"text-gray-10 text-lg"},[t._v("\n      Highlight bạn đang tìm kiếm không tồn tại hoặc đã bị xóa.\n    ")])]),t._v(" "),e("div",{staticClass:"space-y-4"},[e("nuxt-link",{staticClass:"inline-block bg-green_base hover:bg-green-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200",attrs:{to:"/highlights"}},[t._v("\n      ← Quay lại danh sách highlights\n    ")]),t._v(" "),e("div",{staticClass:"text-gray-10"},[t._v("\n      hoặc\n    ")]),t._v(" "),e("nuxt-link",{staticClass:"inline-block border border-green_base text-green_base hover:bg-green_base hover:text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200",attrs:{to:"/"}},[t._v("\n      Về trang chủ\n    ")])],1)])}),[],!1,null,null,null);e.default=r.exports},1625:function(t,e,i){"use strict";i.r(e),i(27),i(93),i(39),i(57);var n={name:"VideoPlayer",props:{videoUrls:{type:Array,default:function(){return[]}},thumbnail:{type:String,default:""},title:{type:String,default:""},autoplay:{type:Boolean,default:!0}},data:function(){return{videoUrl:"",selectedIndex:0,isLoading:!0,hasError:!1,loadTimeout:null,isMobile:!1,isIntersecting:!1,observer:null,preloadAttempted:!1,playerInstance:null,playerId:"jwplayer-".concat(Math.random().toString(36).substr(2,9)),jwPlayerLoaded:!1}},watch:{videoUrls:{immediate:!0,handler:function(t){t&&t.length>0&&(this.videoUrl=t[0],this.selectedIndex=0,this.isLoading=!0,this.hasError=!1)}}},mounted:function(){this.checkMobile(),window.addEventListener("resize",this.checkMobile),this.setupIntersectionObserver(),this.loadJWPlayerScript()},beforeDestroy:function(){if(this.loadTimeout&&clearTimeout(this.loadTimeout),this.observer&&this.observer.disconnect(),this.playerInstance)try{this.playerInstance.remove()}catch(t){}window.removeEventListener("resize",this.checkMobile)},methods:{checkMobile:function(){this.isMobile=768>=window.innerWidth},setupIntersectionObserver:function(){var t=this;"undefined"!=typeof IntersectionObserver&&(this.observer=new IntersectionObserver((function(e){e.forEach((function(e){t.isIntersecting=e.isIntersecting,e.isIntersecting&&!t.preloadAttempted&&t.preloadVideo()}))}),{threshold:.1,rootMargin:"50px"}),this.observer.observe(this.$el))},preloadVideo:function(){this.preloadAttempted||(this.preloadAttempted=!0,this.jwPlayerLoaded?this.initializePlayer():this.loadJWPlayerScript())},loadJWPlayerScript:function(){var t=this;if(void 0!==window.jwplayer)return this.jwPlayerLoaded=!0,void this.initializePlayer();if(document.querySelector('script[src*="jwplayer"]'))var e=setInterval((function(){void 0!==window.jwplayer&&(clearInterval(e),t.jwPlayerLoaded=!0,t.initializePlayer())}),100);else{var i=document.createElement("script");i.src="https://cdn.jwplayer.com/libraries/KB5zFt7A.js",i.async=!0,i.onload=function(){t.jwPlayerLoaded=!0,t.initializePlayer()},i.onerror=function(e){t.hasError=!0,t.isLoading=!1},setTimeout((function(){t.jwPlayerLoaded||(t.hasError=!0,t.isLoading=!1)}),1e4),document.head.appendChild(i)}},initializePlayer:function(){var t;this.jwPlayerLoaded&&null!==(t=this.videoUrls)&&void 0!==t&&t.length&&this.setupJWPlayerSingle(this.videoUrls[0])},selectVideo:function(t,e){var i=this;if(this.selectedIndex=e,this.isLoading=!0,this.hasError=!1,this.loadTimeout&&clearTimeout(this.loadTimeout),this.videoUrl=t,this.playerInstance)try{return void this.playerInstance.load({file:t,type:"hls"})}catch(r){}if(this.jwPlayerLoaded)this.setupJWPlayerSingle(t);else var n=setInterval((function(){i.jwPlayerLoaded&&(clearInterval(n),i.setupJWPlayerSingle(t))}),100)},setupJWPlayerSingle:function(t){var e=this;if(!document.getElementById(this.playerId))return this.hasError=!0,void(this.isLoading=!1);if(this.playerInstance)try{this.playerInstance.remove()}catch(r){}var i=this.getAdaptiveTimeout();this.loadTimeout=setTimeout((function(){e.isLoading&&(e.isLoading=!1,e.hasError=!0)}),i);try{if(void 0===window.jwplayer)return this.hasError=!0,void(this.isLoading=!1);var n=window.jwplayer(this.playerId);if(!n)return this.hasError=!0,void(this.isLoading=!1);if("function"!=typeof n.setup)return this.hasError=!0,void(this.isLoading=!1);this.playerInstance=n.setup({file:t,type:"hls",width:"100%",height:"100%",autostart:this.shouldAutoplay(),controls:!0,stretching:"uniform",skin:{name:"vapor"},androidhls:!0,hlshtml:!0,preload:"metadata",responsive:!0,aspectratio:"16:9",mute:this.shouldAutoplay(),hlsjsConfig:{maxBufferLength:30,maxMaxBufferLength:60,liveSyncDurationCount:3}});try{this.playerInstance.on("ready",(function(){e.onVideoLoad()})),this.playerInstance.on("error",(function(t){if(e.selectedIndex<e.videoUrls.length-1){e.selectedIndex=e.selectedIndex+1,e.isLoading=!0,e.hasError=!1;try{e.playerInstance.load({file:e.videoUrls[e.selectedIndex],type:"hls"})}catch(i){e.onVideoError()}}else e.onVideoError()})),this.playerInstance.on("setupError",(function(t){e.onVideoError()}))}catch(s){this.hasError=!0,this.isLoading=!1}this.playerInstance.on("play",(function(){})),this.playerInstance.on("pause",(function(){})),this.playerInstance.on("complete",(function(){if(e.selectedIndex<e.videoUrls.length-1){e.selectedIndex=e.selectedIndex+1,e.videoUrl=e.videoUrls[e.selectedIndex],e.isLoading=!0,e.hasError=!1;try{e.playerInstance.load({file:e.videoUrls[e.selectedIndex],type:"hls"})}catch(r){}}})),this.playerInstance.on("buffer",(function(){})),this.playerInstance.on("firstFrame",(function(){e.shouldAutoplay()&&"playing"===!e.playerInstance.getState()&&e.tryAutoplay(),e.onVideoLoad()}))}catch(a){this.hasError=!0,this.isLoading=!1}},tryAutoplay:function(){var t=this;if(this.playerInstance)try{var e=this.playerInstance.play();e&&"function"==typeof e.catch&&e.catch((function(e){t.setupUserInteractionAutoplay()}))}catch(i){this.setupUserInteractionAutoplay()}},setupUserInteractionAutoplay:function(){var t=this,e=function(){t.playerInstance&&"playing"!==t.playerInstance.getState()&&(t.playerInstance.setMute(!1),t.playerInstance.play()),document.removeEventListener("click",e),document.removeEventListener("touchstart",e),document.removeEventListener("keydown",e)};document.addEventListener("click",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0}),document.addEventListener("keydown",e,{once:!0})},shouldAutoplay:function(){return!!this.autoplay&&[!this.isMobile||this.autoplay,!window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.isGoodConnection(),this.isIntersecting||!this.observer].every((function(t){return!0===t}))},isGoodConnection:function(){if(!navigator.connection)return!0;var t=navigator.connection;return"slow-2g"!==t.effectiveType&&"2g"!==t.effectiveType&&!t.saveData},getAdaptiveTimeout:function(){var t=this.isMobile?2e4:15e3;if(navigator.connection){var e=navigator.connection;"slow-2g"===e.effectiveType||"2g"===e.effectiveType?t=3e4:"3g"===e.effectiveType?t=25e3:"4g"===e.effectiveType&&(t=15e3),e.downlink>10&&(t=Math.max(1e4,.7*t))}return t},onVideoLoad:function(){this.loadTimeout&&(clearTimeout(this.loadTimeout),this.loadTimeout=null),this.isLoading=!1,this.hasError=!1},onVideoError:function(){this.loadTimeout&&(clearTimeout(this.loadTimeout),this.loadTimeout=null),this.isLoading=!1,this.hasError=!0}}},r=(i(1786),i(42)),s=Object(r.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"video-player-container"},[e("div",{staticClass:"relative bg-black rounded-lg overflow-hidden aspect-video"},[t.videoUrl?e("div",{staticClass:"w-full h-full"},[e("div",{ref:"jwPlayerContainer",staticClass:"w-full h-full jwplayer-container",attrs:{id:t.playerId}}),t._v(" "),t.hasError?e("div",{staticClass:"absolute inset-0 bg-black/80 flex items-center justify-center"},[e("div",{staticClass:"text-white text-center"},[e("svg",{staticClass:"w-16 h-16 text-red-500 mx-auto mb-4",attrs:{fill:"currentColor",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}})]),t._v(" "),e("p",{staticClass:"text-lg mb-2"},[t._v("Không thể tải video")]),t._v(" "),e("p",{staticClass:"text-sm text-gray-300"},[t._v("Vui lòng thử lại sau")])])]):t._e()]):e("div",{staticClass:"w-full h-full flex items-center justify-center bg-gray-800"},[t.thumbnail?e("img",{staticClass:"max-w-full max-h-full object-contain",attrs:{src:t.thumbnail,alt:t.title}}):e("div",{staticClass:"text-gray-400 text-xl"},[t._v("\n        Video không khả dụng\n      ")])])]),t._v(" "),t.videoUrls&&t.videoUrls.length>1?e("div",{staticClass:"mt-4"},[e("h3",{staticClass:"text-white font-semibold mb-2"},[t._v("Chọn video:")]),t._v(" "),e("div",{staticClass:"flex flex-wrap gap-2"},t._l(t.videoUrls,(function(i,n){return e("button",{key:n,class:["px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 border-2",t.selectedIndex===n?"bg-green_base text-white border-green_base":"bg-gray-800 text-white border-gray-600 hover:bg-gray-700 hover:border-gray-500"],on:{click:function(e){return t.selectVideo(i,n)}}},[t._v("\n        Ep "+t._s(n+1)+"\n      ")])})),0)]):t._e()])}),[],!1,null,"5fcb6c39",null);e.default=s.exports},1648:function(t,e,i){t.exports={}},1649:function(t,e,i){t.exports={}},1650:function(t,e,i){t.exports={}},1652:function(t,e,i){t.exports={}},1653:function(t,e,i){t.exports={}},1679:function(t,e,i){t.exports={}},1680:function(t,e,i){t.exports={}},1753:function(t,e,i){"use strict";i(1648)},1754:function(t,e,i){"use strict";i(1649)},1755:function(t,e,i){"use strict";i(1650)},1757:function(t,e,i){"use strict";i(1652)},1758:function(t,e,i){"use strict";i(1653)},1785:function(t,e,i){"use strict";i(1679)},1786:function(t,e,i){"use strict";i(1680)}}]);